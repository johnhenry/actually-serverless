<!DOCTYPE html>
<html lang="en">
  <template id="template-host">
    <div id="$HOST_ID" class="host">
      <main>
        <span
          class="set-strategy circ first"
          title="select strategy: first"
          data-strategy="first"
        >
        </span>
        <span
          class="set-strategy circ last-used"
          title="select strategy: last-used"
          data-strategy="last-used"
        >
        </span>
        <span
          class="set-strategy circ round-robin"
          title="select strategy: round-robin"
          data-strategy="round-robin"
        >
        </span>
        <span
          class="set-strategy circ random"
          title="select strategy: random"
          data-strategy="random"
        >
        </span>
        <a
          href="./host/$HOST_ID/"
          target="_blank"
          rel="opener"
          title="host/$HOST_ID"
          >$HOST_ID/</a
        >

        <button onclick="" class="load-function-file">ùëì</button>

        <button class="set-file-handler">üìÅ</button>
        <button class="claim-host">+</button>
        <span class="release-host close"></span>
      </main>
      <textarea
        class="update-function"
        placeholder="Click üìÅ to serve a folder or add some code here to modify a request.
Double-lick to load file."
      >
$FUNCTION_TEXT</textarea
      >
    </div>
  </template>
  <head>
    <meta name="charset" value="utf8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Local Cluster for web development</title>
    <!--TODO: Update icon-->
    <link rel="icon" type="image/svg+xml" href="favicon.svg" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.css"
    />
    <link rel="stylesheet" href="index.css" />
    <script type="module">
      import IDBKeyVal from "./idb-keyval.mjs";
      window.IDBKeyVal = IDBKeyVal;
    </script>
    <script src="index.mjs" type="module"></script>
  </head>
  <body>
    <header>
      <a title="hosts" href="#">Hosts</a>
      <a title="requests" href="#requests">Requests</a>
      <a title="environment" href="#environment">Environment</a>
      <a title="logs" href="#logs">Logs</a>
      <a title="settings" href="#settings">Settings</a>
      <a title="about" href="#about">About</a>
      <span
        >Client: <span id="client-index"></span
        ><a href="." target="_blank"> +</a></span
      >
    </header>
    <section class="pages">
      <section id="requests" class="view">
        <h2>Requests</h2>
        <div id="requests-form">
          <span>
            <input id="requests-method" placeholder="method" value="GET" />
            <span>host/</span>
            <select id="requests-hosts"></select
            >/
            <input id="requests-path" placeholder="path" value="" />
            HTTP/1.1
          </span>
          <textarea
            id="requests-headers"
            placeholder="content-type: text/plain
accept: ...
..."
          ></textarea>
          <textarea id="requests-body"></textarea>
          <button id="requests-send">Send</button>
        </div>
        <div id="response-box">
          <div id="responses"></div>
        </div>
      </section>

      <section id="environment" class="view">
        <h2>Environment</h2>
        <textarea
          id="environment-variables"
          placeholder="VAR_0=val0
VAR_1=val1
..."
        ></textarea>
      </section>
      <section id="settings" class="view">
        <h2>Settings</h2>
        <span>
          Inject Variables :
          <label>
            context
            <input type="checkbox" id="settings-variables-inject-context" />
          </label>
          <label>
            global
            <input type="checkbox" id="settings-variables-inject-global" />
          </label>
        </span>
        <span>
          Lighting:
          <label>
            auto
            <input type="radio" name="settings-theme" value="auto" />
          </label>
          <label>
            dark
            <input type="radio" name="settings-theme" value="dark" />
          </label>
          <label>
            light
            <input type="radio" name="settings-theme" value="light" />
          </label>
        </span>
      </section>
      <section id="about" class="view">
        <h2>About</h2>
        <div>
          <h3>What is this</h3>
          <p></p>
          <h3>Why is it useful</h3>
          <p></p>
          <h3>How does it work</h3>
          <p></p>
          <h3>Comparison to Serevefolder.dev</h3>
          <p>
            This is a fork of
            <a
              href="https://github.com/AshleyScirra/servefolder.dev"
              target="_blank"
              >servefolder.dev</a
            >

            <a href="https://servefolder.dev/" target="_blank">(hosted here)</a
            >, so comparisons are welcome.
          </p>
          <table class="comparison-table">
            <tr>
              <th>Feature</th>
              <th>Servefolder.dev</th>
              <th>LocalCluster.dev</th>
            </tr>
            <tr>
              <td>Cloud Functions</td>
              <td>êÑÇ</td>
              <td class="clear-winner">‚úì</td>
            </tr>
            <tr>
              <td>Browser Compatibility</td>
              <td>Chrome, Firefox, Safari</td>
              <td>Chrome</td>
            </tr>
          </table>
        </div>
      </section>
      <section id="logs" class="view">
        <h2>Logs</h2>
        <div id="log-box"></div>
      </section>
      <section id="hosts" class="view hosts">
        <h2>Hosts</h2>
        <span>
          <button id="add-host">New Host</button>
          <label>
            <input type="checkbox" id="settings-random-hostname" />
            Random Name
          </label>
          <button id="settings-reload-cluster">reload</button>
          <button id="settings-reset-cluster">reset</button>
          <button id="settings-reset-cluster-and-close">reset + close</button>
          |
          <a download="cluster-backup.json" id="settings-download-save">save</a>
          <button id="settings-upload-save">restore</button>
        </span>
        <input type="file" id="select-file" style="display: none" />
        <div id="host-list"></div>
      </section>
    </section>
  </body>
</html>
